<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="/index.umd.js"></script>
    <style>
        body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }

        .top {
            width: 100%;
            height: calc(100vh - 400px);
            display: flex;
        }

        .box {
            flex: 1;
            border: 1px solid #ffffff;
        }

        .box video {
            width: 100%;
            height: 100%;
            display: none;
        }

        .toolbar {
            width: 100%;
            height: 80px;
            background-color: antiquewhite;
        }

        .log-list {
            width: 100%;
            height: 320px;
            background-color: greenyellow;
        }
    </style>
</head>
<body>
<div class="top">
    <div class="box">
        <video id="local-video" controls autoplay></video>
    </div>
    <div class="box"></div>
</div>
<div class="toolbar">
    <button id="local-btn">本地屏幕流</button>
    <button id="start">开始</button>
</div>
<div class="log-list"></div>
<script>
    // video
    const localVideo = document.getElementById('local-video')
    // btn
    const localBtn = document.getElementById('local-btn')
    const startBtn = document.getElementById('start')
    // stream
    let localStream = null


    localBtn.onclick = async function () {
        try {
            localStream = await navigator.mediaDevices.getDisplayMedia({video: true})
            localVideo.srcObject = localStream
            localVideo.style.display = 'block'
        } catch (err) {
            console.error(err)
        }
    }

    startBtn.onclick = () => {
        const client = new dgm.Client({
            url: 'ws://localhost:8080/ws',
            error: (err) => {
                console.log('err->', err);
            }
        })
        // client.setup()
    }

</script>
</body>
</html>